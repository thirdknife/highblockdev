{"componentChunkName":"component---src-pages-prismic-pages-uid-js","path":"/write-obs-plugin-go-lang/","result":{"data":{"prismicPages":{"data":{"title":{"richText":[{"type":"heading1","text":"Writing OBS plugin in Go","spans":[]}]},"body":{"richText":[{"type":"paragraph","text":"I use OBS when running podcast that me and my friend do and I think its an amazing software. I am in process of writing my plugin, while doing that I thought if I can use Go since you can write C code using cgo.","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"Cgo comes with its own cross platform compilation challanges, but I managed to compile it on windows 10 using gcc. Following are the steps to follow.","spans":[]},{"type":"paragraph","text":"My starting point was https://github.com/fzwoch/obs-golang-plugin, It does not mention how to add include libraries since you will need for libobs. Someone also asked the question here but there is a partial answer from the author which does help. ","spans":[{"start":22,"end":65,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/fzwoch/obs-golang-plugin"}},{"start":180,"end":184,"type":"hyperlink","data":{"link_type":"Web","url":"https://github.com/fzwoch/obs-golang-plugin/issues/4"}}]},{"type":"o-list-item","text":"Clone obs under a folder using `git submodule add https://github.com/obsproject/obs-studio/ thirdparty/obs`.","spans":[]},{"type":"o-list-item","text":"You can also add this under .gitmodules so it clones under your main project.\n```\n[submodule \"thirdparty/obs\"]\npath = thirdparty/obs\nurl = https://github.com/obsproject/obs-studio/\nbranch = 29.1.3\n```","spans":[]},{"type":"o-list-item","text":"In your main.go file you will have to add these at top your file.\n```\n// #cgo CFLAGS: -Ithirdparty/obs/libobs\n// #cgo darwin LDFLAGS: -L. -lobs.0\n// #cgo linux LDFLAGS: -L. -lobs\n// #cgo windows LDFLAGS: -L. -lobs\n// #include <obs-module.h>\n```","spans":[]},{"type":"o-list-item","text":"You do need to copy obs.dll from the OBS installed folder to sit beside your go file.","spans":[]},{"type":"o-list-item","text":"Install gcc for windows using https://jmeubank.github.io/tdm-gcc/ I find this works the best. ","spans":[{"start":30,"end":65,"type":"hyperlink","data":{"link_type":"Web","url":"https://jmeubank.github.io/tdm-gcc/"}}]},{"type":"o-list-item","text":"You can compile your go file using `go build -buildmode=c-shared -o goplugin.dll`","spans":[]},{"type":"paragraph","text":"","spans":[]},{"type":"paragraph","text":"If you find this helpful or have question please follow me at http://x.com/thirdknife","spans":[{"start":62,"end":85,"type":"hyperlink","data":{"link_type":"Web","url":"http://x.com/thirdknife"}}]}]}}}},"pageContext":{"id":"ea992c9c-5ccc-57ff-9711-430c3177a80b","uid":"write-obs-plugin-go-lang","__params":{"uid":"write-obs-plugin-go-lang"}}},"staticQueryHashes":["1947816842","63159454"]}